---
title: "Enkel exempel-rapport"
---

# Introduktion

Detta är en enkel exempelrapport som visar grundläggande funktioner för Quarto-rapporter med interaktiva diagram.

**OBS:** Denna rapport använder inställningar från `../_quarto.yml` så YAML-headern är minimal.

## Ladda paket och funktioner

```{r}
#| label: setup

library(tidyverse)
library(ggiraph)
library(downloadthis)
library(htmltools)
library(glue)

# Läs in visualiseringsfunktioner
source(here::here("R", "functions", "visualisering_interaktiva_funktioner.R"))
```

## Skapa exempeldata

```{r}
#| label: create-data

# Enkel tidsseriedata
data <- tibble(
  år = 2015:2024,
  befolkning = c(550000, 558000, 565000, 572000, 580000, 
                 588000, 595000, 603000, 610000, 618000),
  region = "Göteborg"
)
```

## Interaktivt linjediagram

Här är ett exempel på ett interaktivt diagram med tooltip och nedladdningsfunktion:

```{r}
#| label: fig-befolkning
#| fig-cap: "Befolkningsutveckling i Göteborg 2015-2024"

# Skapa tooltip
data_med_tooltip <- data |>
  mutate(
    tooltip = skapa_tooltip(
      data = cur_data(),
      gruppvars = c("år"),
      data_vars = c("befolkning"),
      grupp_labels = c("år" = "År"),
      data_labels = c("befolkning" = "Befolkning"),
      data_format = c("befolkning" = "nummer")
    )$tooltip_text
  )

# Skapa plot
p <- data_med_tooltip |>
  ggplot(aes(x = år, y = befolkning)) +
  geom_line_interactive(
    aes(data_id = region, tooltip = tooltip),
    color = "#0076bc",
    linewidth = 1.2
  ) +
  geom_point_interactive(
    aes(data_id = region, tooltip = tooltip),
    color = "#0076bc",
    size = 3
  ) +
  scale_y_continuous(
    labels = scales::label_number(big.mark = " "),
    limits = c(0, NA)
  ) +
  labs(
    x = "År",
    y = "Befolkning"
  ) +
  theme_minimal() +
  theme(
    text = element_text(family = "sans-serif", size = 11),
    plot.title = element_text(size = 14, face = "bold", color = "#3F5664"),
    axis.title = element_text(size = 11, color = "#3F5664")
  )

# Gör interaktiv
skapa_interaktiv_plot(
  plot_objekt = p,
  export_data = data,
  kolumn_mappning = c("år" = "År", "befolkning" = "Befolkning", "region" = "Region"),
  output_namn = "befolkning_goteborg",
  width = 8,
  height = 5
)
```

**Prova själv:**

- Hovra över punkterna för att se detaljer
- Klicka på menyknappen (☰) för att ladda ner diagram eller data
- Klicka på förstora-knappen för helskärm

## Sammanfattning

Detta exempel visar:

- ✅ Enkel YAML-header (inställningar från `_quarto.yml`)
- ✅ Interaktiva diagram med hover-effekt
- ✅ Nedladdning av bild och data
- ✅ Svensk formatering (mellanslag som tusenavskiljare)
- ✅ Göteborg Stads färgpalett

## Nästa steg

- Se `02_avancerad_rapport.qmd` för mer komplexa exempel
- Läs `../docs/anvandning.md` för fullständig dokumentation
- Använd `../template.qmd` som utgångspunkt för dina egna rapporter
